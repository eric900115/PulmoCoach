<div>
  <div>
    <div>
      <app-sidebar [isMenu]="false" style="display:block; position:fixed; z-index: 100;"></app-sidebar>
      <!-- normal screen -->

      <!-- md -->
      <ng-container *ngIf="isCustom && !isCustomMenuFinished">
        <div class="custom_menu" class="d-none d-md-block">
          <h1 style="text-align: center;">Custom Quiz</h1>
          <div
            style="width: 90%; height: 0.1rem; border-top: solid #FFFFFF 1px; margin-inline: auto; margin-top: 1%;margin-bottom: 2%;">
          </div>
          <div style="margin-left: 3%;">

            <div class="select_text">
              Abnomarlity
              <div class="custom_normal_text arrow select"
                style="width: 80%; font-size: 2rem; margin-right: auto; margin-left: 1%; margin-top: 0.5%; display: grid; grid-template-columns: repeat(2, 1fr); grid-gap: 10px;">

                <label *ngFor="let c of Symptom" class="checkbox-label"
                  style="font-size: xx-large; margin-right: 3%; margin-bottom: 1%; align-items: center; display: flex;">

                  <input type="checkbox" [(ngModel)]="c.selected" class="checkbox-input"
                    style="transform: scale(1.5); margin-right: 20px; width: 24px; height: 24px;">

                  {{c.value}}

                </label>

              </div>


            </div>
          </div>



          <div class="mb-3" style="display: flex; align-items: center;">
            <label for="exampleFormControlInput1" class="form-label"
              style="margin-top:3%;margin-left: 3%; font-size: xx-large;"
              [(ngModel)]="customAbnomarlityRate">Abnormality Rate(%)</label>
            <input min="0" max="100" class="form-control" id="exampleFormControlInput1"
              placeholder="enter a number range from 0-100" style="margin-top:3%;width: 25%; margin-left: 3%;">
          </div>
          <div class="mb-3" style="display: flex; align-items: center;">
            <label for="exampleFormControlInput2" class="form-label" style="margin-left: 3%; font-size: xx-large;"
              [(ngModel)]="customQuestionNum">Number of Questions</label>
            <input min="1" max="15" type="email" class="form-control" id="exampleFormControlInput2"
              placeholder="enter a number range from 1-15" style="width: 25%; margin-left: 3%;">
          </div>

          <div style="margin-left: 3%;">
            <span class="select_text">Gender</span>
            <select [(ngModel)]="customGender" class="custom_normal_text arrow"
              style="width: 20%; font-size: 2em; height: 1.8em; margin-right: auto; margin-left: 3%; margin-top: 0.5em; background-color: white; border: 1px solid white; border-radius: 5px; padding: 0.25em; color: #333; text-align-last: center;">
              <option value="Select" disabled selected style="color:black;">Select</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Both</option>
            </select>
          </div>






          <div style="display: flex; justify-content:right; margin-top: 0.5%; padding: 3%;">
            <button id="custom_clear_btn" class="custom_normal_text arrow"
              style="font-size: 2em;margin-right: 3%;">Clear</button>
            <button id="custom_start_btn" (click)="customMenuDone()" class="custom_normal_text arrow"
              style="font-size: 2em;margin-left: 3%;">Start</button>
          </div>
        </div>
      </ng-container>

      <!-- sm -->
      <ng-container *ngIf="isCustom && !isCustomMenuFinished">
        <div class="custom_menu" class="d-block d-md-none">
          <h1 style="text-align: center; font-size: xx-large;">Custom Quiz</h1>
          <div style="width: 90%; height: 0.1rem; border-top: solid #FFFFFF 1px; margin: 1% auto 2%;"></div>

          <div style="margin-left: 3%;">
            <div class="select_text" style="font-size: xx-large;">Abnormality</div>
            <div class="checkbox-columns">
              <label *ngFor="let c of Symptom" class="checkbox-label"
                style="display: block; margin-bottom: 15px; font-size: x-large;">
                <input type="checkbox" [(ngModel)]="c.selected" class="checkbox-input"
                  style="transform: scale(3); margin-right: 10px;">
                {{c.value}}
              </label>
            </div>
          </div>

          <div class="mb-3" style="display: flex; align-items: center;">
            <label for="exampleFormControlInput1" class="form-label"
              style="margin-top: 3%; margin-left: 3%; font-size: large;" [(ngModel)]="customAbnomarlityRate">Abnormality
              Rate(%)</label>
            <input min="0" max="100" class="form-control" id="exampleFormControlInput1" placeholder="0-100"
              style="margin-top: 3%; width: 40%; margin-left: 3%;">
          </div>

          <div class="mb-3" style="display: flex; align-items: center;">
            <label for="exampleFormControlInput2" class="form-label" style="margin-left: 3%; font-size: large;"
              [(ngModel)]="customQuestionNum">Number of Questions</label>
            <input min="1" max="15" type="number" class="form-control" id="exampleFormControlInput2" placeholder="1-15"
              style="width: 40%; margin-left: 3%;">
          </div>

          <div style="margin-left: 3%;">
            <span class="select_text" style="font-size: large;margin-right:5%;">Gender</span>
            <select [(ngModel)]="customGender" class="custom_normal_text arrow custom-select">
              <option value="Select" disabled selected>Select</option>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Both</option>
            </select>
          </div>

          <div style="display: flex; justify-content: flex-end; margin-top: 0.5%; padding: 3%;">
            <button id="custom_clear_btn" class="custom_normal_text arrow"
              style="font-size: 1.3em; margin-right: 3%;">Clear</button>
            <button id="custom_start_btn" (click)="customMenuDone()" class="custom_normal_text arrow"
              style="font-size: 1.3em; margin-left: 3%;">Start</button>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="(!isCustom && !isStart) || (isCustom && isCustomMenuFinished && !isStart)">
        <app-random-quiz (RQstart)="startQuiz()"></app-random-quiz>
      </ng-container>

      <ng-container *ngIf="!isQuizCompleted && isStart">
        <div class="grid-container" style="position: relative;">
          <div class="grid-left">
            <img id="photo" src={{this.ImgURL[currentQuestion]}} alt="user_img">
          </div>

          <!-- <div class="grid_midline"></div> -->

          <div class="top_btn">
            <button id="back" (click)="prevQuestion()" [disabled]="(currentQuestion === 0) 
            && (currentSubQuestion === 0)">Back</button>
            <button id="next" (click)="nextQuestion()" [disabled]="(currentQuestion === questionList.length -1) 
            && (currentSubQuestion === questionList[questionList.length - 1].length - 1)">Next</button>
            <button id="end_quiz" (click)="endQuiz()">End Quiz</button>
          </div>

          <div class="Q">{{questionList[currentQuestion][currentSubQuestion][0]}}?
            <!-- QuestionQuestionQuestionQuestionQuestionQuestionQuestionQuestionQuestionQuestion -->
          </div>
          <div class="hint">
            <button id="hint_btn" (click)="show_hint()" style="padding: 3%;">Hint</button>
            <p [hidden]="hidden_hint" id="hint"
              style="background:grey; padding: 1%; z-index:9999; position:absolute; border-radius: 0.5em; margin: 1%;">
            </p>
            <!-- <button id="hint_btn" (click) = "show_hint()" style="padding: 3%;">Hint</button>  -->
          </div>
          <div class="answer">
            <button id="present" (click)="answer('YES');">Present</button>
            <button id="absent" (click)="answer('NO');">Absent</button>
          </div>
          <div class="process">
            <p id="ratio">
              <var id="finished">{{currentQuestion + 1}}</var>
              /
              <var id="total">{{questionList.length}}</var>
            </p>
          </div>
        </div>
      </ng-container>


      <ng-container *ngIf="isQuizCompleted">
        <div class="container-fluid" style="background-color:black; padding:3%; border-color:white;border-width:0.1em;">
          <div
            style="border-color:white;border-width:0.1rem; border-style:solid; display:flex; flex-direction:column; padding:2%; justify-content:space-between;">
            <div style="display: flex; justify-content:space-between;">
              <div style="display:flex; flex-direction: column; align-items: center;">
                <img src="../../assets/history/circle.svg" style="width: 90%; padding: 5%;" />
                <p class="normal_text" style="font-size: 2.5em; padding-top: 8%;">User Name</p>
              </div>
            </div>
            <p class="normal_text" style="font-size: 4em; margin-inline: auto; padding-top: 10%; padding-bottom: 1%;">
              History</p>
            <div class="link-top"></div>
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr;  justify-items: center; padding-block: 2%;">
              <p class="normal_text" style="font-size: 2em;">Question</p>
              <p class="normal_text" style="font-size: 2em;">Answer</p>
              <p class="normal_text" style="font-size: 2em;">Your Answer</p>
            </div>

            <div *ngFor="let answer of AnswerList; let i = index">
              <div *ngFor="let item of answer | keyvalue"
                style="display: grid; grid-template-columns: 1fr 1fr 1fr;  justify-items: center; padding-block: 2%;">
                <p class="normal_text" style="font-size: 1.75em;">{{item.key}}</p>
                <p class="normal_text" style="font-size: 1.75em;">{{item.value[0]}}</p>
                <p class="normal_text" style="font-size: 1.75em;">{{item.value[1]}}</p>
                <button *ngIf="isCustom" class="custom_normal_text arrow"
                  style="border-radius:100%; padding: 5%; margin: auto; " (click)="showImg(i)">Answer key</button>
                <img *ngIf="isCustom" [hidden]="Show_CurrentImagePath[i]" [src]="ImgLabelURL[i]" style="width: 100%;" />
              </div>
            </div>
            <button id="result_home_btn" routerLink="/menu" class="normal_text"
              style="font-size: 2em; height:1.5em; background-color:transparent; border-color: white; border-width: 0.01em; align-self: center; margin-right: auto; margin-left: 3%; margin-top: 10%; padding:3%;">Home</button>
          </div>
        </div>
      </ng-container>
    </div>
  </div>